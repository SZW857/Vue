{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// The `GPOS` table contains kerning pairs, among other things.\n// https://www.microsoft.com/typography/OTSPEC/gpos.htm\n\nimport check from '../check';\nimport { decode } from '../types';\nimport parse from '../parse';\nimport table from '../table';\n\n// Parse the metadata `meta` table.\n// https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6meta.html\nfunction parseMetaTable(data, start) {\n  const p = new parse.Parser(data, start);\n  const tableVersion = p.parseULong();\n  check.argument(tableVersion === 1, 'Unsupported META table version.');\n  p.parseULong(); // flags - currently unused and set to 0\n  p.parseULong(); // tableOffset\n  const numDataMaps = p.parseULong();\n  const tags = {};\n  for (let i = 0; i < numDataMaps; i++) {\n    const tag = p.parseTag();\n    const dataOffset = p.parseULong();\n    const dataLength = p.parseULong();\n    const text = decode.UTF8(data, start + dataOffset, dataLength);\n    tags[tag] = text;\n  }\n  return tags;\n}\nfunction makeMetaTable(tags) {\n  const numTags = Object.keys(tags).length;\n  let stringPool = '';\n  const stringPoolOffset = 16 + numTags * 12;\n  const result = new table.Table('meta', [{\n    name: 'version',\n    type: 'ULONG',\n    value: 1\n  }, {\n    name: 'flags',\n    type: 'ULONG',\n    value: 0\n  }, {\n    name: 'offset',\n    type: 'ULONG',\n    value: stringPoolOffset\n  }, {\n    name: 'numTags',\n    type: 'ULONG',\n    value: numTags\n  }]);\n  for (let tag in tags) {\n    const pos = stringPool.length;\n    stringPool += tags[tag];\n    result.fields.push({\n      name: 'tag ' + tag,\n      type: 'TAG',\n      value: tag\n    });\n    result.fields.push({\n      name: 'offset ' + tag,\n      type: 'ULONG',\n      value: stringPoolOffset + pos\n    });\n    result.fields.push({\n      name: 'length ' + tag,\n      type: 'ULONG',\n      value: tags[tag].length\n    });\n  }\n  result.fields.push({\n    name: 'stringPool',\n    type: 'CHARARRAY',\n    value: stringPool\n  });\n  return result;\n}\nexport default {\n  parse: parseMetaTable,\n  make: makeMetaTable\n};","map":{"version":3,"names":["check","decode","parse","table","parseMetaTable","data","start","p","Parser","tableVersion","parseULong","argument","numDataMaps","tags","i","tag","parseTag","dataOffset","dataLength","text","UTF8","makeMetaTable","numTags","Object","keys","length","stringPool","stringPoolOffset","result","Table","name","type","value","pos","fields","push","make"],"sources":["C:/Users/14486/Desktop/社区公益系统前端/vue_community/node_modules/opentype.js/src/tables/meta.js"],"sourcesContent":["// The `GPOS` table contains kerning pairs, among other things.\n// https://www.microsoft.com/typography/OTSPEC/gpos.htm\n\nimport check from '../check';\nimport { decode } from '../types';\nimport parse from '../parse';\nimport table from '../table';\n\n// Parse the metadata `meta` table.\n// https://developer.apple.com/fonts/TrueType-Reference-Manual/RM06/Chap6meta.html\nfunction parseMetaTable(data, start) {\n    const p = new parse.Parser(data, start);\n    const tableVersion = p.parseULong();\n    check.argument(tableVersion === 1, 'Unsupported META table version.');\n    p.parseULong(); // flags - currently unused and set to 0\n    p.parseULong(); // tableOffset\n    const numDataMaps = p.parseULong();\n\n    const tags = {};\n    for (let i = 0; i < numDataMaps; i++) {\n        const tag = p.parseTag();\n        const dataOffset = p.parseULong();\n        const dataLength = p.parseULong();\n        const text = decode.UTF8(data, start + dataOffset, dataLength);\n\n        tags[tag] = text;\n    }\n    return tags;\n}\n\nfunction makeMetaTable(tags) {\n    const numTags = Object.keys(tags).length;\n    let stringPool = '';\n    const stringPoolOffset = 16 + numTags * 12;\n\n    const result = new table.Table('meta', [\n        {name: 'version', type: 'ULONG', value: 1},\n        {name: 'flags', type: 'ULONG', value: 0},\n        {name: 'offset', type: 'ULONG', value: stringPoolOffset},\n        {name: 'numTags', type: 'ULONG', value: numTags}\n    ]);\n\n    for (let tag in tags) {\n        const pos = stringPool.length;\n        stringPool += tags[tag];\n\n        result.fields.push({name: 'tag ' + tag, type: 'TAG', value: tag});\n        result.fields.push({name: 'offset ' + tag, type: 'ULONG', value: stringPoolOffset + pos});\n        result.fields.push({name: 'length ' + tag, type: 'ULONG', value: tags[tag].length});\n    }\n\n    result.fields.push({name: 'stringPool', type: 'CHARARRAY', value: stringPool});\n\n    return result;\n}\n\nexport default { parse: parseMetaTable, make: makeMetaTable };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}