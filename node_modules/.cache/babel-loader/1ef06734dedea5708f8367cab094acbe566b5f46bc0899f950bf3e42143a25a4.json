{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nrequire('../../roving-focus-group/index.js');\nrequire('../../../utils/index.js');\nvar dropdownItemImpl = require('./dropdown-item-impl.js');\nvar useDropdown = require('./useDropdown.js');\nvar dropdown = require('./dropdown.js');\nvar tokens = require('./tokens.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar rovingFocusItem = require('../../roving-focus-group/src/roving-focus-item.js');\nvar event = require('../../../utils/dom/event.js');\nconst _sfc_main = vue.defineComponent({\n  name: \"ElDropdownItem\",\n  components: {\n    ElDropdownCollectionItem: dropdown.ElCollectionItem,\n    ElRovingFocusItem: rovingFocusItem[\"default\"],\n    ElDropdownItemImpl: dropdownItemImpl[\"default\"]\n  },\n  inheritAttrs: false,\n  props: dropdown.dropdownItemProps,\n  emits: [\"pointermove\", \"pointerleave\", \"click\"],\n  setup(props, {\n    emit,\n    attrs\n  }) {\n    const {\n      elDropdown\n    } = useDropdown.useDropdown();\n    const _instance = vue.getCurrentInstance();\n    const itemRef = vue.ref(null);\n    const textContent = vue.computed(() => {\n      var _a, _b;\n      return (_b = (_a = vue.unref(itemRef)) == null ? void 0 : _a.textContent) != null ? _b : \"\";\n    });\n    const {\n      onItemEnter,\n      onItemLeave\n    } = vue.inject(tokens.DROPDOWN_INJECTION_KEY, void 0);\n    const handlePointerMove = event.composeEventHandlers(e => {\n      emit(\"pointermove\", e);\n      return e.defaultPrevented;\n    }, event.whenMouse(e => {\n      var _a;\n      if (props.disabled) {\n        onItemLeave(e);\n      } else {\n        onItemEnter(e);\n        if (!e.defaultPrevented) {\n          ;\n          (_a = e.currentTarget) == null ? void 0 : _a.focus();\n        }\n      }\n    }));\n    const handlePointerLeave = event.composeEventHandlers(e => {\n      emit(\"pointerleave\", e);\n      return e.defaultPrevented;\n    }, event.whenMouse(e => {\n      onItemLeave(e);\n    }));\n    const handleClick = event.composeEventHandlers(e => {\n      emit(\"click\", e);\n      return e.type !== \"keydown\" && e.defaultPrevented;\n    }, e => {\n      var _a, _b, _c;\n      if (props.disabled) {\n        e.stopImmediatePropagation();\n        return;\n      }\n      if ((_a = elDropdown == null ? void 0 : elDropdown.hideOnClick) == null ? void 0 : _a.value) {\n        (_b = elDropdown.handleClick) == null ? void 0 : _b.call(elDropdown);\n      }\n      (_c = elDropdown.commandHandler) == null ? void 0 : _c.call(elDropdown, props.command, _instance, e);\n    });\n    const propsAndAttrs = vue.computed(() => {\n      return {\n        ...props,\n        ...attrs\n      };\n    });\n    return {\n      handleClick,\n      handlePointerMove,\n      handlePointerLeave,\n      textContent,\n      propsAndAttrs\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _a;\n  const _component_el_dropdown_item_impl = vue.resolveComponent(\"el-dropdown-item-impl\");\n  const _component_el_roving_focus_item = vue.resolveComponent(\"el-roving-focus-item\");\n  const _component_el_dropdown_collection_item = vue.resolveComponent(\"el-dropdown-collection-item\");\n  return vue.openBlock(), vue.createBlock(_component_el_dropdown_collection_item, {\n    disabled: _ctx.disabled,\n    \"text-value\": (_a = _ctx.textValue) != null ? _a : _ctx.textContent\n  }, {\n    default: vue.withCtx(() => [vue.createVNode(_component_el_roving_focus_item, {\n      focusable: !_ctx.disabled\n    }, {\n      default: vue.withCtx(() => [vue.createVNode(_component_el_dropdown_item_impl, vue.mergeProps(_ctx.propsAndAttrs, {\n        onPointerleave: _ctx.handlePointerLeave,\n        onPointermove: _ctx.handlePointerMove,\n        onClickimpl: _ctx.handleClick\n      }), {\n        default: vue.withCtx(() => [vue.renderSlot(_ctx.$slots, \"default\")]),\n        _: 3\n      }, 16, [\"onPointerleave\", \"onPointermove\", \"onClickimpl\"])]),\n      _: 3\n    }, 8, [\"focusable\"])]),\n    _: 3\n  }, 8, [\"disabled\", \"text-value\"]);\n}\nvar DropdownItem = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue\"]]);\nexports[\"default\"] = DropdownItem;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;AAoCA,MAAKA,YAAaC,mBAAa;EAC7BC,IAAM;EACNC,UAAY;IAAAC,0BACVA;IAAAC,mBACAA;IAAAC,oBACAA;EAAA,CACF;EACAC,YAAc;EACdC,KAAO;EACPC,KAAO,GAAC,aAAe,kBAAgB,OAAO;EAC9CC,KAAM,QAAO;IAAEC;IAAMC;EAAS;IACtB;MAAEC;IAAA,IAAeC,uBAAY;IACnC,MAAMC,YAAYC,sBAAmB;IAC/B,gBAAUC,QAAwB,IAAI;IAC5C,MAAMC,cAAcC,YAAS,OAAM;MACnC,IAAMC,EAAE;MAKF,4BAAoB,CACxBC,yBAAqB;IACnB;IACA;MAAAC,WAAS;MAAAC;IAAA;IACX,MACUC,iBAAO;MACfb,IAAI,cAAgB;MAClB,yBAAa;IAAA,GACRc;MACL;MACI,SAAG,CAAkBC;QACvBH;MAAC,CAAC;QACJD;QACF;UAEJ;UAEM,qBAAqB,KACzB,kBAAqB;QACnB;MACA;IAAS,CACX,EACA;IACE,wBAAa;MAEjBX;MAEM,yBACJ;IACE,wBAAe;MACRY,WAAW;IAAe,CACnC,EACA;IACE,MAAII,WAAgB;MAClBhB,IAAE,CAAyB;MAC3B;IAAA,CACF;MACI;MACF,kBAAyB;QAC3BiB;QACA;MAAuD;MAKrD,oBAAgB,WAAe;QACnC,MAASf,UAAU,YAAS;MAAA;MAGvB;IAAA,CACL;IACA;MACA;QAAA;QAAA;MAAA;IAAA,CACA;IACA;MACFc;MACFH;MACDK;;;;;;AAlG+B,SAbjBC;EAAA;EACe;uCAWH;EAAA;EAAA,oBATS,EAAG;IAAAJ;4BAQT;EAAA;IANDK,SACNC,kCACD;MAAAC,SACF;IAAA;iCAEJ;QAAAC","names":["_sfc_main","defineComponent","name","components","ElDropdownCollectionItem","ElRovingFocusItem","ElDropdownItemImpl","inheritAttrs","props","emits","setup","emit","attrs","elDropdown","useDropdown","_instance","getCurrentInstance","ref","textContent","computed","_a","itemRef","onItemEnter","onItemLeave","handlePointerMove","whenMouse","disabled","handleClick","e","handlePointerLeave","_sfc_render","default","_withCtx","focusable","onPointerleave"],"sources":["../../../../../../packages/components/dropdown/src/dropdown-item.vue"],"sourcesContent":["<template>\n  <el-dropdown-collection-item\n    :disabled=\"disabled\"\n    :text-value=\"textValue ?? textContent\"\n  >\n    <el-roving-focus-item :focusable=\"!disabled\">\n      <el-dropdown-item-impl\n        v-bind=\"propsAndAttrs\"\n        @pointerleave=\"handlePointerLeave\"\n        @pointermove=\"handlePointerMove\"\n        @clickimpl=\"handleClick\"\n      >\n        <slot />\n      </el-dropdown-item-impl>\n    </el-roving-focus-item>\n  </el-dropdown-collection-item>\n</template>\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  inject,\n  ref,\n  unref,\n} from 'vue'\nimport { ElRovingFocusItem } from '@element-plus/components/roving-focus-group'\nimport { composeEventHandlers, whenMouse } from '@element-plus/utils'\nimport ElDropdownItemImpl from './dropdown-item-impl.vue'\nimport { useDropdown } from './useDropdown'\nimport {\n  ElCollectionItem as ElDropdownCollectionItem,\n  dropdownItemProps,\n} from './dropdown'\nimport { DROPDOWN_INJECTION_KEY } from './tokens'\n\nexport default defineComponent({\n  name: 'ElDropdownItem',\n  components: {\n    ElDropdownCollectionItem,\n    ElRovingFocusItem,\n    ElDropdownItemImpl,\n  },\n  inheritAttrs: false,\n  props: dropdownItemProps,\n  emits: ['pointermove', 'pointerleave', 'click'],\n  setup(props, { emit, attrs }) {\n    const { elDropdown } = useDropdown()\n    const _instance = getCurrentInstance()\n    const itemRef = ref<HTMLElement | null>(null)\n    const textContent = computed(() => unref(itemRef)?.textContent ?? '')\n    const { onItemEnter, onItemLeave } = inject(\n      DROPDOWN_INJECTION_KEY,\n      undefined\n    )!\n\n    const handlePointerMove = composeEventHandlers(\n      (e: PointerEvent) => {\n        emit('pointermove', e)\n        return e.defaultPrevented\n      },\n      whenMouse((e) => {\n        if (props.disabled) {\n          onItemLeave(e)\n        } else {\n          onItemEnter(e)\n          if (!e.defaultPrevented) {\n            ;(e.currentTarget as HTMLElement)?.focus()\n          }\n        }\n      })\n    )\n\n    const handlePointerLeave = composeEventHandlers(\n      (e: PointerEvent) => {\n        emit('pointerleave', e)\n        return e.defaultPrevented\n      },\n      whenMouse((e) => {\n        onItemLeave(e)\n      })\n    )\n\n    const handleClick = composeEventHandlers(\n      (e: PointerEvent) => {\n        emit('click', e)\n        return e.type !== 'keydown' && e.defaultPrevented\n      },\n      (e) => {\n        if (props.disabled) {\n          e.stopImmediatePropagation()\n          return\n        }\n        if (elDropdown?.hideOnClick?.value) {\n          elDropdown.handleClick?.()\n        }\n        elDropdown.commandHandler?.(props.command, _instance, e)\n      }\n    )\n\n    // direct usage of v-bind={ ...$props, ...$attrs } causes type errors\n    const propsAndAttrs = computed(() => {\n      return { ...props, ...attrs }\n    })\n\n    return {\n      handleClick,\n      handlePointerMove,\n      handlePointerLeave,\n      textContent,\n      propsAndAttrs,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}