{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nrequire('../../../../utils/index.js');\nrequire('../../../../hooks/index.js');\nvar draggable = require('../utils/draggable.js');\nvar pluginVue_exportHelper = require('../../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../../hooks/use-namespace/index.js');\nvar position = require('../../../../utils/dom/position.js');\nconst _sfc_main = vue.defineComponent({\n  name: \"ElSlPanel\",\n  props: {\n    color: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    const ns = index.useNamespace(\"color-svpanel\");\n    const instance = vue.getCurrentInstance();\n    const cursorTop = vue.ref(0);\n    const cursorLeft = vue.ref(0);\n    const background = vue.ref(\"hsl(0, 100%, 50%)\");\n    const colorValue = vue.computed(() => {\n      const hue = props.color.get(\"hue\");\n      const value = props.color.get(\"value\");\n      return {\n        hue,\n        value\n      };\n    });\n    function update() {\n      const saturation = props.color.get(\"saturation\");\n      const value = props.color.get(\"value\");\n      const el = instance.vnode.el;\n      const {\n        clientWidth: width,\n        clientHeight: height\n      } = el;\n      cursorLeft.value = saturation * width / 100;\n      cursorTop.value = (100 - value) * height / 100;\n      background.value = `hsl(${props.color.get(\"hue\")}, 100%, 50%)`;\n    }\n    function handleDrag(event) {\n      const el = instance.vnode.el;\n      const rect = el.getBoundingClientRect();\n      const {\n        clientX,\n        clientY\n      } = position.getClientXY(event);\n      let left = clientX - rect.left;\n      let top = clientY - rect.top;\n      left = Math.max(0, left);\n      left = Math.min(left, rect.width);\n      top = Math.max(0, top);\n      top = Math.min(top, rect.height);\n      cursorLeft.value = left;\n      cursorTop.value = top;\n      props.color.set({\n        saturation: left / rect.width * 100,\n        value: 100 - top / rect.height * 100\n      });\n    }\n    vue.watch(() => colorValue.value, () => {\n      update();\n    });\n    vue.onMounted(() => {\n      draggable.draggable(instance.vnode.el, {\n        drag: event => {\n          handleDrag(event);\n        },\n        end: event => {\n          handleDrag(event);\n        }\n      });\n      update();\n    });\n    return {\n      cursorTop,\n      cursorLeft,\n      background,\n      colorValue,\n      handleDrag,\n      update,\n      ns\n    };\n  }\n});\nconst _hoisted_1 = /* @__PURE__ */vue.createElementVNode(\"div\", null, null, -1);\nconst _hoisted_2 = [_hoisted_1];\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return vue.openBlock(), vue.createElementBlock(\"div\", {\n    class: vue.normalizeClass(_ctx.ns.b()),\n    style: vue.normalizeStyle({\n      backgroundColor: _ctx.background\n    })\n  }, [vue.createElementVNode(\"div\", {\n    class: vue.normalizeClass(_ctx.ns.e(\"white\"))\n  }, null, 2), vue.createElementVNode(\"div\", {\n    class: vue.normalizeClass(_ctx.ns.e(\"black\"))\n  }, null, 2), vue.createElementVNode(\"div\", {\n    class: vue.normalizeClass(_ctx.ns.e(\"cursor\")),\n    style: vue.normalizeStyle({\n      top: _ctx.cursorTop + \"px\",\n      left: _ctx.cursorLeft + \"px\"\n    })\n  }, _hoisted_2, 6)], 6);\n}\nvar SvPanel = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue\"]]);\nexports[\"default\"] = SvPanel;","map":{"version":3,"mappings":";;;;;;;;;;;;AAqCA,MAAKA,YAAaC,mBAAa;EAC7BC,IAAM;EAENC,KAAO;IACLC,KAAO;MACLC,IAAM;MACNC,QAAU;IAAA;EACZ,CACF;EAEAC,MAAMJ,KAAO;IACL,WAAKK,mBAAa,eAAe;IAGvC,MAAMC,WAAWC,sBAAmB;IAG9B,kBAAYC,QAAI,CAAC;IACjB,mBAAaA,QAAI,CAAC;IAClB,mBAAaA,QAAI,mBAAmB;IACpC,mBAAaC,aAAS,MAAM;MAChC,MAAMC,GAAM,SAAMT,KAAM,KAAI,KAAK;MACjC,MAAMU,KAAQ,SAAMV,KAAM,KAAI,OAAO;MAC9B;QAAES;QAAKC;MAAM;IAAA,CACrB;IAGiB;MAChB,MAAMC,UAAa,SAAMX,KAAM,KAAI,YAAY;MAC/C,MAAMU,KAAQ,SAAMV,KAAM,KAAI,OAAO;MAE/B,WAAKK,SAASO,KAAM;MAC1B,MAAM;QAAEC,aAAaC,KAAO;QAAAC,cAAcC;MAAW;MAE1CC,mBAASN,aAAaG,KAAS;MAChCI,kBAAU,CAAM,eAASF,MAAU;MAE7CG,WAAWT,KAAQ,UAAOX,KAAM,OAAMqB,IAAI,KAAK;IAAA;IAGjD,oBAAoBC,KAAgC;MAC5C,WAAKhB,SAASO,KAAM;MACpB,aAAOU,GAAGC,qBAAsB;MACtC,MAAM;QAAEC;QAASC;MAAY,yBAAYJ,KAAK;MAE1C,WAAOG,UAAUE,IAAK;MACtB,UAAMD,UAAUC,IAAK;MAClBC,YAAKC,GAAI,IAAGD,IAAI;MACvBA,OAAOE,IAAK,KAAIF,IAAM,OAAKb,KAAK;MAE1BgB,WAAKF,GAAI,IAAGE,GAAG;MACrBA,MAAMD,IAAK,KAAIC,GAAK,OAAKd,MAAM;MAE/BC,WAAWP,KAAQ;MACnBQ,UAAUR,KAAQ;MAClBX,MAAMC,MAAM+B,GAAI;QACdpB,YAAagB,IAAO,QAAKb,KAAS;QAClCJ,KAAO,QAAOoB,GAAM,QAAKd,MAAU;MAAA,CACpC;IAAA;IAKDgB,gBAAMC,UAAW,QACjB,MAAM;MACGC;IAAA,CAEX;IAEAC,cAAU,MAAM;MACJC,6BAASxB,MAAMU,EAAmB;QAC1Ce,MAAOhB,KAAU;UACfiB,WAAWjB,KAAK;QAAA,CAClB;QACAkB,KAAMlB,KAAU;UACdiB,WAAWjB,KAAK;QAAA;MAClB,CACD;MAEMa;IAAA,CACR;IACM;MACLhB;MACAD;MACAE;MACAc;MACAK;MACAJ;MACAM;IAAA,CACF;EAAA;AAEJ,CAAC;kCAhHYC;oBAAPC;;0BAfJC,sBAiBM;IAhBHC,OAAKC,kBAAE,SAAGC,CAAC;IACXC,KAAK;MAA2BC;IAAA;MAIjCP,sBAA8B;IAAxBG,OAAKC,kBAAE,SAAGI,CAAC;EAAA,aACjBR,sBAA8B;IAAxBG,OAAKC,kBAAE,SAAGI,CAAC;EAAA,aACjBR,sBAQM;IAPHG,OAAKC,kBAAE,SAAGI,CAAC;IACXF,KAAK;MAAAjB,KAAiBoB,IAAS;MAAAvB,MAAuBuB,IAAU;IAAA","names":["_sfc_main","defineComponent","name","props","color","type","required","setup","useNamespace","instance","getCurrentInstance","ref","computed","hue","value","saturation","vnode","clientWidth","width","clientHeight","height","cursorLeft","cursorTop","background","get","event","el","getBoundingClientRect","clientX","clientY","rect","left","max","Math","top","set","watch","colorValue","update","onMounted","draggable","drag","handleDrag","end","ns","_createElementVNode","_hoisted_1","_createElementBlock","class","_normalizeClass","b","style","backgroundColor","e","_ctx"],"sources":["../../../../../../../packages/components/color-picker/src/components/sv-panel.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"ns.b()\"\n    :style=\"{\n      backgroundColor: background,\n    }\"\n  >\n    <div :class=\"ns.e('white')\" />\n    <div :class=\"ns.e('black')\" />\n    <div\n      :class=\"ns.e('cursor')\"\n      :style=\"{\n        top: cursorTop + 'px',\n        left: cursorLeft + 'px',\n      }\"\n    >\n      <div />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  onMounted,\n  ref,\n  watch,\n} from 'vue'\nimport { getClientXY } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { draggable } from '../utils/draggable'\n\nimport type { PropType } from 'vue'\nimport type Color from '../utils/color'\n\nexport default defineComponent({\n  name: 'ElSlPanel',\n\n  props: {\n    color: {\n      type: Object as PropType<Color>,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const ns = useNamespace('color-svpanel')\n\n    // instance\n    const instance = getCurrentInstance()!\n\n    // data\n    const cursorTop = ref(0)\n    const cursorLeft = ref(0)\n    const background = ref('hsl(0, 100%, 50%)')\n    const colorValue = computed(() => {\n      const hue = props.color.get('hue')\n      const value = props.color.get('value')\n      return { hue, value }\n    })\n\n    // methods\n    function update() {\n      const saturation = props.color.get('saturation')\n      const value = props.color.get('value')\n\n      const el = instance.vnode.el!\n      const { clientWidth: width, clientHeight: height } = el\n\n      cursorLeft.value = (saturation * width) / 100\n      cursorTop.value = ((100 - value) * height) / 100\n\n      background.value = `hsl(${props.color.get('hue')}, 100%, 50%)`\n    }\n\n    function handleDrag(event: MouseEvent | TouchEvent) {\n      const el = instance.vnode.el!\n      const rect = el.getBoundingClientRect()\n      const { clientX, clientY } = getClientXY(event)\n\n      let left = clientX - rect.left\n      let top = clientY - rect.top\n      left = Math.max(0, left)\n      left = Math.min(left, rect.width)\n\n      top = Math.max(0, top)\n      top = Math.min(top, rect.height)\n\n      cursorLeft.value = left\n      cursorTop.value = top\n      props.color.set({\n        saturation: (left / rect.width) * 100,\n        value: 100 - (top / rect.height) * 100,\n      })\n    }\n\n    // watch\n    watch(\n      () => colorValue.value,\n      () => {\n        update()\n      }\n    )\n    // mounted\n    onMounted(() => {\n      draggable(instance.vnode.el as HTMLElement, {\n        drag: (event) => {\n          handleDrag(event)\n        },\n        end: (event) => {\n          handleDrag(event)\n        },\n      })\n\n      update()\n    })\n    return {\n      cursorTop,\n      cursorLeft,\n      background,\n      colorValue,\n      handleDrag,\n      update,\n      ns,\n    }\n  },\n})\n</script>\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}