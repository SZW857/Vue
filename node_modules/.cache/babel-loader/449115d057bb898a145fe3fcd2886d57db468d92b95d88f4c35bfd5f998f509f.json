{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nvar index$2 = require('../../icon/index.js');\nvar iconsVue = require('@element-plus/icons-vue');\nrequire('../../../hooks/index.js');\nvar index$3 = require('../../progress/index.js');\nvar uploadList = require('./upload-list.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-locale/index.js');\nvar index$1 = require('../../../hooks/use-namespace/index.js');\nconst _hoisted_1 = [\"onKeydown\"];\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = [\"onClick\"];\nconst __default__ = vue.defineComponent({\n  name: \"ElUploadList\"\n});\nconst _sfc_main = /* @__PURE__ */vue.defineComponent({\n  ...__default__,\n  props: uploadList.uploadListProps,\n  emits: uploadList.uploadListEmits,\n  setup(__props, {\n    emit\n  }) {\n    const {\n      t\n    } = index.useLocale();\n    const nsUpload = index$1.useNamespace(\"upload\");\n    const nsIcon = index$1.useNamespace(\"icon\");\n    const nsList = index$1.useNamespace(\"list\");\n    const focusing = vue.ref(false);\n    const handleRemove = file => {\n      emit(\"remove\", file);\n    };\n    return (_ctx, _cache) => {\n      return vue.openBlock(), vue.createBlock(vue.TransitionGroup, {\n        tag: \"ul\",\n        class: vue.normalizeClass([vue.unref(nsUpload).b(\"list\"), vue.unref(nsUpload).bm(\"list\", _ctx.listType), vue.unref(nsUpload).is(\"disabled\", _ctx.disabled)]),\n        name: vue.unref(nsList).b()\n      }, {\n        default: vue.withCtx(() => [(vue.openBlock(true), vue.createElementBlock(vue.Fragment, null, vue.renderList(_ctx.files, file => {\n          return vue.openBlock(), vue.createElementBlock(\"li\", {\n            key: file.uid || file.name,\n            class: vue.normalizeClass([vue.unref(nsUpload).be(\"list\", \"item\"), vue.unref(nsUpload).is(file.status), {\n              focusing: focusing.value\n            }]),\n            tabindex: \"0\",\n            onKeydown: vue.withKeys($event => !_ctx.disabled && handleRemove(file), [\"delete\"]),\n            onFocus: _cache[0] || (_cache[0] = $event => focusing.value = true),\n            onBlur: _cache[1] || (_cache[1] = $event => focusing.value = false),\n            onClick: _cache[2] || (_cache[2] = $event => focusing.value = false)\n          }, [vue.renderSlot(_ctx.$slots, \"default\", {\n            file\n          }, () => [_ctx.listType === \"picture\" || file.status !== \"uploading\" && _ctx.listType === \"picture-card\" ? (vue.openBlock(), vue.createElementBlock(\"img\", {\n            key: 0,\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-thumbnail\")),\n            src: file.url,\n            alt: \"\"\n          }, null, 10, _hoisted_2)) : vue.createCommentVNode(\"v-if\", true), file.status === \"uploading\" || _ctx.listType !== \"picture-card\" ? (vue.openBlock(), vue.createElementBlock(\"div\", {\n            key: 1,\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-info\"))\n          }, [vue.createElementVNode(\"a\", {\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-name\")),\n            onClick: vue.withModifiers($event => _ctx.handlePreview(file), [\"prevent\"])\n          }, [vue.createVNode(vue.unref(index$2.ElIcon), {\n            class: vue.normalizeClass(vue.unref(nsIcon).m(\"document\"))\n          }, {\n            default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.Document))]),\n            _: 1\n          }, 8, [\"class\"]), vue.createElementVNode(\"span\", {\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-file-name\"))\n          }, vue.toDisplayString(file.name), 3)], 10, _hoisted_3), file.status === \"uploading\" ? (vue.openBlock(), vue.createBlock(vue.unref(index$3.ElProgress), {\n            key: 0,\n            type: _ctx.listType === \"picture-card\" ? \"circle\" : \"line\",\n            \"stroke-width\": _ctx.listType === \"picture-card\" ? 6 : 2,\n            percentage: Number(file.percentage),\n            style: vue.normalizeStyle(_ctx.listType === \"picture-card\" ? \"\" : \"margin-top: 0.5rem\")\n          }, null, 8, [\"type\", \"stroke-width\", \"percentage\", \"style\"])) : vue.createCommentVNode(\"v-if\", true)], 2)) : vue.createCommentVNode(\"v-if\", true), vue.createElementVNode(\"label\", {\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-status-label\"))\n          }, [_ctx.listType === \"text\" ? (vue.openBlock(), vue.createBlock(vue.unref(index$2.ElIcon), {\n            key: 0,\n            class: vue.normalizeClass([vue.unref(nsIcon).m(\"upload-success\"), vue.unref(nsIcon).m(\"circle-check\")])\n          }, {\n            default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.CircleCheck))]),\n            _: 1\n          }, 8, [\"class\"])) : [\"picture-card\", \"picture\"].includes(_ctx.listType) ? (vue.openBlock(), vue.createBlock(vue.unref(index$2.ElIcon), {\n            key: 1,\n            class: vue.normalizeClass([vue.unref(nsIcon).m(\"upload-success\"), vue.unref(nsIcon).m(\"check\")])\n          }, {\n            default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.Check))]),\n            _: 1\n          }, 8, [\"class\"])) : vue.createCommentVNode(\"v-if\", true)], 2), !_ctx.disabled ? (vue.openBlock(), vue.createBlock(vue.unref(index$2.ElIcon), {\n            key: 2,\n            class: vue.normalizeClass(vue.unref(nsIcon).m(\"close\")),\n            onClick: $event => handleRemove(file)\n          }, {\n            default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.Close))]),\n            _: 2\n          }, 1032, [\"class\", \"onClick\"])) : vue.createCommentVNode(\"v-if\", true), vue.createCommentVNode(\" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn\"), vue.createCommentVNode(\" This is a bug which needs to be fixed \"), vue.createCommentVNode(\" TODO: Fix the incorrect navigation interaction \"), !_ctx.disabled ? (vue.openBlock(), vue.createElementBlock(\"i\", {\n            key: 3,\n            class: vue.normalizeClass(vue.unref(nsIcon).m(\"close-tip\"))\n          }, vue.toDisplayString(vue.unref(t)(\"el.upload.deleteTip\")), 3)) : vue.createCommentVNode(\"v-if\", true), _ctx.listType === \"picture-card\" ? (vue.openBlock(), vue.createElementBlock(\"span\", {\n            key: 4,\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-actions\"))\n          }, [vue.createElementVNode(\"span\", {\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-preview\")),\n            onClick: $event => _ctx.handlePreview(file)\n          }, [vue.createVNode(vue.unref(index$2.ElIcon), {\n            class: vue.normalizeClass(vue.unref(nsIcon).m(\"zoom-in\"))\n          }, {\n            default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.ZoomIn))]),\n            _: 1\n          }, 8, [\"class\"])], 10, _hoisted_4), !_ctx.disabled ? (vue.openBlock(), vue.createElementBlock(\"span\", {\n            key: 0,\n            class: vue.normalizeClass(vue.unref(nsUpload).be(\"list\", \"item-delete\")),\n            onClick: $event => handleRemove(file)\n          }, [vue.createVNode(vue.unref(index$2.ElIcon), {\n            class: vue.normalizeClass(vue.unref(nsIcon).m(\"delete\"))\n          }, {\n            default: vue.withCtx(() => [vue.createVNode(vue.unref(iconsVue.Delete))]),\n            _: 1\n          }, 8, [\"class\"])], 10, _hoisted_5)) : vue.createCommentVNode(\"v-if\", true)], 2)) : vue.createCommentVNode(\"v-if\", true)])], 42, _hoisted_1);\n        }), 128)), vue.renderSlot(_ctx.$slots, \"append\")]),\n        _: 3\n      }, 8, [\"class\", \"name\"]);\n    };\n  }\n});\nvar UploadList = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue\"]]);\nexports[\"default\"] = UploadList;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;uCA2Hc;EACZA,IAAM;AACR;;;;;;;;IAKM;MAAEC;IAAA,IAAMC,eAAU;IAClB,iBAAWC,qBAAa,QAAQ;IAChC,eAASA,qBAAa,MAAM;IAC5B,eAASA,qBAAa,MAAM;IAE5B,iBAAWC,QAAI,KAAK;IAEpB,qBAAgBC,IAAqB;MACzCC,KAAK,UAAUD,IAAI;IAAA,CACrB","names":["name","t","useLocale","useNamespace","ref","file","emit"],"sources":["../../../../../../packages/components/upload/src/upload-list.vue"],"sourcesContent":["<template>\n  <transition-group\n    tag=\"ul\"\n    :class=\"[\n      nsUpload.b('list'),\n      nsUpload.bm('list', listType),\n      nsUpload.is('disabled', disabled),\n    ]\"\n    :name=\"nsList.b()\"\n  >\n    <li\n      v-for=\"file in files\"\n      :key=\"file.uid || file.name\"\n      :class=\"[\n        nsUpload.be('list', 'item'),\n        nsUpload.is(file.status),\n        { focusing },\n      ]\"\n      tabindex=\"0\"\n      @keydown.delete=\"!disabled && handleRemove(file)\"\n      @focus=\"focusing = true\"\n      @blur=\"focusing = false\"\n      @click=\"focusing = false\"\n    >\n      <slot :file=\"file\">\n        <img\n          v-if=\"\n            listType === 'picture' ||\n            (file.status !== 'uploading' && listType === 'picture-card')\n          \"\n          :class=\"nsUpload.be('list', 'item-thumbnail')\"\n          :src=\"file.url\"\n          alt=\"\"\n        />\n        <div\n          v-if=\"file.status === 'uploading' || listType !== 'picture-card'\"\n          :class=\"nsUpload.be('list', 'item-info')\"\n        >\n          <a\n            :class=\"nsUpload.be('list', 'item-name')\"\n            @click.prevent=\"handlePreview(file)\"\n          >\n            <el-icon :class=\"nsIcon.m('document')\"><Document /></el-icon>\n            <span :class=\"nsUpload.be('list', 'item-file-name')\">\n              {{ file.name }}\n            </span>\n          </a>\n          <el-progress\n            v-if=\"file.status === 'uploading'\"\n            :type=\"listType === 'picture-card' ? 'circle' : 'line'\"\n            :stroke-width=\"listType === 'picture-card' ? 6 : 2\"\n            :percentage=\"Number(file.percentage)\"\n            :style=\"listType === 'picture-card' ? '' : 'margin-top: 0.5rem'\"\n          />\n        </div>\n\n        <label :class=\"nsUpload.be('list', 'item-status-label')\">\n          <el-icon\n            v-if=\"listType === 'text'\"\n            :class=\"[nsIcon.m('upload-success'), nsIcon.m('circle-check')]\"\n          >\n            <circle-check />\n          </el-icon>\n          <el-icon\n            v-else-if=\"['picture-card', 'picture'].includes(listType)\"\n            :class=\"[nsIcon.m('upload-success'), nsIcon.m('check')]\"\n          >\n            <Check />\n          </el-icon>\n        </label>\n        <el-icon\n          v-if=\"!disabled\"\n          :class=\"nsIcon.m('close')\"\n          @click=\"handleRemove(file)\"\n        >\n          <Close />\n        </el-icon>\n        <!-- Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn-->\n        <!-- This is a bug which needs to be fixed -->\n        <!-- TODO: Fix the incorrect navigation interaction -->\n        <i v-if=\"!disabled\" :class=\"nsIcon.m('close-tip')\">{{\n          t('el.upload.deleteTip')\n        }}</i>\n        <span\n          v-if=\"listType === 'picture-card'\"\n          :class=\"nsUpload.be('list', 'item-actions')\"\n        >\n          <span\n            :class=\"nsUpload.be('list', 'item-preview')\"\n            @click=\"handlePreview(file)\"\n          >\n            <el-icon :class=\"nsIcon.m('zoom-in')\"><zoom-in /></el-icon>\n          </span>\n          <span\n            v-if=\"!disabled\"\n            :class=\"nsUpload.be('list', 'item-delete')\"\n            @click=\"handleRemove(file)\"\n          >\n            <el-icon :class=\"nsIcon.m('delete')\"><Delete /></el-icon>\n          </span>\n        </span>\n      </slot>\n    </li>\n    <slot name=\"append\" />\n  </transition-group>\n</template>\n<script lang=\"ts\" setup>\nimport { ref } from 'vue'\nimport { ElIcon } from '@element-plus/components/icon'\nimport {\n  Check,\n  CircleCheck,\n  Close,\n  Delete,\n  Document,\n  ZoomIn,\n} from '@element-plus/icons-vue'\nimport { useLocale, useNamespace } from '@element-plus/hooks'\nimport ElProgress from '@element-plus/components/progress'\n\nimport { uploadListEmits, uploadListProps } from './upload-list'\nimport type { UploadFile } from './upload'\n\ndefineOptions({\n  name: 'ElUploadList',\n})\n\ndefineProps(uploadListProps)\nconst emit = defineEmits(uploadListEmits)\n\nconst { t } = useLocale()\nconst nsUpload = useNamespace('upload')\nconst nsIcon = useNamespace('icon')\nconst nsList = useNamespace('list')\n\nconst focusing = ref(false)\n\nconst handleRemove = (file: UploadFile) => {\n  emit('remove', file)\n}\n</script>\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}