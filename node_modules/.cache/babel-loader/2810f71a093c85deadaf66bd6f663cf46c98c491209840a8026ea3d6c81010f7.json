{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar vue = require('vue');\nrequire('../../popper/index.js');\nrequire('../../../utils/index.js');\nrequire('../../../hooks/index.js');\nrequire('../../../tokens/index.js');\nvar trigger = require('./trigger.js');\nvar utils = require('./utils.js');\nvar pluginVue_exportHelper = require('../../../_virtual/plugin-vue_export-helper.js');\nvar index = require('../../../hooks/use-namespace/index.js');\nvar tooltip = require('../../../tokens/tooltip.js');\nvar event = require('../../../utils/dom/event.js');\nvar trigger$1 = require('../../popper/src/trigger2.js');\nconst __default__ = vue.defineComponent({\n  name: \"ElTooltipTrigger\"\n});\nconst _sfc_main = /* @__PURE__ */vue.defineComponent({\n  ...__default__,\n  props: trigger.useTooltipTriggerProps,\n  setup(__props, {\n    expose\n  }) {\n    const props = __props;\n    const ns = index.useNamespace(\"tooltip\");\n    const {\n      controlled,\n      id,\n      open,\n      onOpen,\n      onClose,\n      onToggle\n    } = vue.inject(tooltip.TOOLTIP_INJECTION_KEY, void 0);\n    const triggerRef = vue.ref(null);\n    const stopWhenControlledOrDisabled = () => {\n      if (vue.unref(controlled) || props.disabled) {\n        return true;\n      }\n    };\n    const trigger = vue.toRef(props, \"trigger\");\n    const onMouseenter = event.composeEventHandlers(stopWhenControlledOrDisabled, utils.whenTrigger(trigger, \"hover\", onOpen));\n    const onMouseleave = event.composeEventHandlers(stopWhenControlledOrDisabled, utils.whenTrigger(trigger, \"hover\", onClose));\n    const onClick = event.composeEventHandlers(stopWhenControlledOrDisabled, utils.whenTrigger(trigger, \"click\", e => {\n      if (e.button === 0) {\n        onToggle(e);\n      }\n    }));\n    const onFocus = event.composeEventHandlers(stopWhenControlledOrDisabled, utils.whenTrigger(trigger, \"focus\", onOpen));\n    const onBlur = event.composeEventHandlers(stopWhenControlledOrDisabled, utils.whenTrigger(trigger, \"focus\", onClose));\n    const onContextMenu = event.composeEventHandlers(stopWhenControlledOrDisabled, utils.whenTrigger(trigger, \"contextmenu\", e => {\n      e.preventDefault();\n      onToggle(e);\n    }));\n    const onKeydown = event.composeEventHandlers(stopWhenControlledOrDisabled, e => {\n      const {\n        code\n      } = e;\n      if (props.triggerKeys.includes(code)) {\n        e.preventDefault();\n        onToggle(e);\n      }\n    });\n    expose({\n      triggerRef\n    });\n    return (_ctx, _cache) => {\n      return vue.openBlock(), vue.createBlock(vue.unref(trigger$1[\"default\"]), {\n        id: vue.unref(id),\n        \"virtual-ref\": _ctx.virtualRef,\n        open: vue.unref(open),\n        \"virtual-triggering\": _ctx.virtualTriggering,\n        class: vue.normalizeClass(vue.unref(ns).e(\"trigger\")),\n        onBlur: vue.unref(onBlur),\n        onClick: vue.unref(onClick),\n        onContextmenu: vue.unref(onContextMenu),\n        onFocus: vue.unref(onFocus),\n        onMouseenter: vue.unref(onMouseenter),\n        onMouseleave: vue.unref(onMouseleave),\n        onKeydown: vue.unref(onKeydown)\n      }, {\n        default: vue.withCtx(() => [vue.renderSlot(_ctx.$slots, \"default\")]),\n        _: 3\n      }, 8, [\"id\", \"virtual-ref\", \"open\", \"virtual-triggering\", \"class\", \"onBlur\", \"onClick\", \"onContextmenu\", \"onFocus\", \"onMouseenter\", \"onMouseleave\", \"onKeydown\"]);\n    };\n  }\n});\nvar ElTooltipTrigger = /* @__PURE__ */pluginVue_exportHelper[\"default\"](_sfc_main, [[\"__file\", \"/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue\"]]);\nexports[\"default\"] = ElTooltipTrigger;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;uCA2Bc;EACZA,IAAM;AACR;;;;;;;;IAIM,WAAKC,mBAAa,SAAS;IAC3B;MAAEC;MAAYC,EAAI;MAAAC;MAAMC;MAAQC,OAAS;MAAAC;IAAA,IAAaC,UAC1D,gCACA,KACF;IAGM,mBAAaC,QAAS,IAAI;IAEhC,MAAMC,+BAA+B,MAAM;MACzC,IAAIC,SAAM,WAAU,CAAK,UAAMC,QAAU;QAChC;MAAA;IACT,CACF;IACM,gBAAUC,SAAM,QAAO,SAAS;IACtC,MAAMC,eAAeC,0BACnB,+BACAC,kBAAYC,OAAS,WAASZ,MAAM,CACtC;IACA,MAAMa,eAAeH,0BACnB,+BACAC,kBAAYC,OAAS,WAASX,OAAO,CACvC;IACA,MAAMa,UAAUJ,0BACd,+BACAC,kBAAYC,OAAS,WAAUG,CAAM;MAE9B,MAAiBC,WAAW,CAAG;QAClCd,SAASa,CAAC;MAAA;IACZ,CACD,CACH;IAEA,MAAME,UAAUP,0BACd,+BACAC,kBAAYC,OAAS,WAASZ,MAAM,CACtC;IAEA,MAAMkB,SAASR,0BACb,+BACAC,kBAAYC,OAAS,WAASX,OAAO,CACvC;IAEA,MAAMkB,gBAAgBT,0BACpB,+BACAC,kBAAYC,OAAS,iBAAgBG,CAAa;MAChDA,EAAEK,cAAe;MACjBlB,SAASa,CAAC;IAAA,CACX,CACH;IAEA,MAAMM,SAAY,8BAChBhB,4BACA,EAACU,CAAqB;MACpB,MAAM;QAAEO;MAAS;MACjB,IAAIC,KAAM,aAAYC,QAAS,KAAI,CAAG;QACpCT,EAAEK,cAAe;QACjBlB,SAASa,CAAC;MAAA;IACZ,CAEJ;IAEaU;MAIXC;IAAA,CACD","names":["name","useNamespace","controlled","id","open","onOpen","onClose","onToggle","inject","ref","stopWhenControlledOrDisabled","unref","disabled","toRef","onMouseenter","composeEventHandlers","whenTrigger","trigger","onMouseleave","onClick","e","button","onFocus","onBlur","onContextMenu","preventDefault","onKeydown","code","props","includes","expose","triggerRef"],"sources":["../../../../../../packages/components/tooltip/src/trigger.vue"],"sourcesContent":["<template>\n  <el-popper-trigger\n    :id=\"id\"\n    :virtual-ref=\"virtualRef\"\n    :open=\"open\"\n    :virtual-triggering=\"virtualTriggering\"\n    :class=\"ns.e('trigger')\"\n    @blur=\"onBlur\"\n    @click=\"onClick\"\n    @contextmenu=\"onContextMenu\"\n    @focus=\"onFocus\"\n    @mouseenter=\"onMouseenter\"\n    @mouseleave=\"onMouseleave\"\n    @keydown=\"onKeydown\"\n  >\n    <slot />\n  </el-popper-trigger>\n</template>\n<script lang=\"ts\" setup>\nimport { inject, ref, toRef, unref } from 'vue'\nimport { ElPopperTrigger } from '@element-plus/components/popper'\nimport { composeEventHandlers } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { TOOLTIP_INJECTION_KEY } from '@element-plus/tokens'\nimport { useTooltipTriggerProps } from './trigger'\nimport { whenTrigger } from './utils'\n\ndefineOptions({\n  name: 'ElTooltipTrigger',\n})\n\nconst props = defineProps(useTooltipTriggerProps)\n\nconst ns = useNamespace('tooltip')\nconst { controlled, id, open, onOpen, onClose, onToggle } = inject(\n  TOOLTIP_INJECTION_KEY,\n  undefined\n)!\n\n// TODO any is temporary, replace with `OnlyChildExpose | null` later\nconst triggerRef = ref<any>(null)\n\nconst stopWhenControlledOrDisabled = () => {\n  if (unref(controlled) || props.disabled) {\n    return true\n  }\n}\nconst trigger = toRef(props, 'trigger')\nconst onMouseenter = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'hover', onOpen)\n)\nconst onMouseleave = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'hover', onClose)\n)\nconst onClick = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'click', (e) => {\n    // distinguish left click\n    if ((e as MouseEvent).button === 0) {\n      onToggle(e)\n    }\n  })\n)\n\nconst onFocus = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'focus', onOpen)\n)\n\nconst onBlur = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'focus', onClose)\n)\n\nconst onContextMenu = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  whenTrigger(trigger, 'contextmenu', (e: Event) => {\n    e.preventDefault()\n    onToggle(e)\n  })\n)\n\nconst onKeydown = composeEventHandlers(\n  stopWhenControlledOrDisabled,\n  (e: KeyboardEvent) => {\n    const { code } = e\n    if (props.triggerKeys.includes(code)) {\n      e.preventDefault()\n      onToggle(e)\n    }\n  }\n)\n\ndefineExpose({\n  /**\n   * @description trigger element\n   */\n  triggerRef,\n})\n</script>\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}